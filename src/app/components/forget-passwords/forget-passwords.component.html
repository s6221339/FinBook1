<div class="forget-password-page">
  <!-- 忘記密碼卡片 -->
  <div class="forget-password-card">
    <div class="card-header">
      <mat-icon>lock_reset</mat-icon>
      <h3>忘記密碼</h3>
    </div>

    <div class="card-content">
      <!-- 說明文字 -->
      <div class="description-section">
        <p class="description-text">
          請輸入您的電子郵件帳號，我們將發送驗證碼到您的信箱
        </p>
      </div>

      <!-- 帳號輸入區域 -->
      <div class="form-group">
        <label class="form-label">
          <mat-icon>email</mat-icon>
          帳號信箱
        </label>
        <div class="input-button-wrapper">
          <input
            class="form-input"
            type="email"
            placeholder="請輸入電子郵件帳號"
            [(ngModel)]="account"
            name="account"
            required
          />
          <button
            type="button"
            class="send-code-btn"
            [disabled]="countdown > 0 || isSendingCode || !account"
            (click)="sendCode()"
          >
            <mat-icon>{{ isSendingCode ? 'hourglass_empty' : 'send' }}</mat-icon>
            {{ countdown > 0 ? '請稍後（' + countdown + '秒）' : (isSendingCode ? '發送中...' : '寄出驗證碼') }}
          </button>
        </div>
      </div>

      <hr>
      <!-- 驗證碼輸入區域（寄出後才顯示） -->
      @if(codeSent) {
        <div class="form-group verification-section">
          <label class="form-label">
            <mat-icon>verified_user</mat-icon>
            驗證碼
          </label>
          <div class="input-button-wrapper">
            <input
              class="form-input"
              type="text"
              placeholder="請輸入驗證碼"
              [(ngModel)]="verifyCode"
              name="verifyCode"

              required
            />
            <button
              type="button"
              class="verify-btn"
              [disabled]="!verifyCode"
              (click)="checkCode()"
            >
              <mat-icon>check_circle</mat-icon>
              驗證
            </button>
          </div>

          <!-- 驗證碼提示 -->
          <div class="verification-hint">
            <mat-icon>info</mat-icon>
            <span>請檢查您的信箱並輸入收到的驗證碼</span>
          </div>
        </div>
      }

      <!-- 返回登入 -->
      <div class="back-to-login">
        <a routerLink="/login" class="back-link">
          <mat-icon>arrow_back</mat-icon>
          返回登入頁面
        </a>
      </div>
    </div>
  </div>
</div>
