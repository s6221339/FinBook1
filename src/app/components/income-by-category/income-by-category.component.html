<div class="filter-bar">
  <label>å¹´ä»½ï¼š</label>
  <select [(ngModel)]="selectedYear" (change)="onYearChange()">
    @for(y of years; track $index) {
      <option [value]="y">{{ y }} å¹´</option>
    }
  </select>

  <label>æœˆä»½ï¼š</label>
  <select [(ngModel)]="selectedMonth" (change)="onMonthChange()">
    @for(m of months; track $index) {
      <option [value]="m">{{ m }} æœˆ</option>
    }
  </select>
</div>

<div class="chart-section">
  @if(pieChartData.length > 0){
    <canvas baseChart
    [data]="pieChartDataSet"
    [type]="'pie'"
    [options]="pieChartOptions">
  </canvas>
  }
  @else {
    <p class="no-data-text">ğŸ“­ æœ¬æœˆå°šç„¡æ”¯å‡ºè³‡æ–™</p>
  }
</div>

<div class="summary">
  <p>ğŸ’° æœ¬æœˆç¸½æ”¶å…¥ï¼š{{ totalExpense | number:'1.0-0' }} å…ƒ</p>
  <p>ğŸ“… æ¯æ—¥å¹³å‡æ”¶å…¥ï¼šç´„ {{ getAveragePerDay() | number:'1.0-0' }} å…ƒ</p>
</div>

@if(filteredPaymentInfo.length > 0) {
  <table class="summary-table">
    <thead>
      <tr>
        <th>é¡åˆ¥</th>
        <th>é‡‘é¡</th>
        <th>æ¯”ä¾‹</th>
      </tr>
    </thead>
    <tbody>
      @for(p of filteredPaymentInfo; track $index) {
        <tr>
          <td>{{ p.type }}</td>
          <td [ngStyle]="{ color: pieChartColors[$index % pieChartColors.length], 'font-weight': 'bold' }">
            {{ p.totalAmount | number:'1.0-0' }}
          </td>
          <td [ngStyle]="{ color: pieChartColors[$index % pieChartColors.length], 'font-weight': 'bold' }">
            {{ ((p.totalAmount / totalExpense) * 100) | number:'1.1-1' }}ï¼…
          </td>
        </tr>
      }
    </tbody>
  </table>
}
<div style="margin-bottom: 20px;"></div>
