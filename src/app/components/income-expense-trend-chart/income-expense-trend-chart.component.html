<div>
  <div class="filter-bar">
    <label>年份：</label>
    <select [(ngModel)]="selectedYear" (change)="onYearChange()">
      @for(y of years; track $index) {
        <option [value]="y">{{ y }} 年</option>
      }
    </select>

    <label>月份：</label>
    <select [(ngModel)]="selectedMonth" (change)="onMonthChange()">
      @for(m of monthList; track $index) {
        <option [value]="m">{{ m }} 月</option>
      }
    </select>
  </div>

  <div class="chart-area">
    <canvas baseChart
      [datasets]="[
        { data: chartIncome, label: '收入', type: 'bar', backgroundColor: 'green' },
        { data: chartOutlay, label: '支出', type: 'bar', backgroundColor: 'red' },
        { data: chartNet, label: '收支', type: 'line', backgroundColor: 'gray', fill: false }
      ]"
      [labels]="chartLabels"
      [options]="chartOptions"
      chartType="bar">
    </canvas>
  </div>

  <div class="month-summary">
    <h3>{{ selectedYear }} 年 {{ selectedMonth }} 月</h3>
    <p>收入：{{ singleMonthIncome | number }} 元</p>
    <p>支出：{{ singleMonthOutlay | number }} 元</p>
    <p>總收支：{{ singleMonthNet | number }} 元</p>
  </div>
</div>
