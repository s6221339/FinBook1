<div>
  <div>
    <h2>ğŸ—‘ï¸ æœ€è¿‘åˆªé™¤æ¬¾é …æ¸…å–®</h2>
  </div>
  <!-- å¸³æˆ¶é¸æ“‡ä¸‹æ‹‰ -->
  <div class="form-section">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>é¸æ“‡å¸³æˆ¶</mat-label>
      <mat-select [(value)]="selectedBalanceId" (valueChange)="onBalanceChange()">
        @for(b of balances; track $index){
          <mat-option [value]="b.balanceId">{{ b.name }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </div>
  <div style="display: flex; gap: 12px; margin: 12px 0;">
    <button (click)="toggleSelectAll()">âœ…{{ isAllSelected ? 'å–æ¶ˆå…¨é¸' : 'å…¨é¸' }}</button>
    <button (click)="recoverSelectedPayments()">â†©ï¸å¾©åŸ</button>
  </div>
  <!-- å¾…åˆªå¸³æ¬¾è¡¨æ ¼ -->
  <div>
    @if(filteredPayments.length > 0){
      <table class="pending-table">
      <thead>
        <tr>
          <th>
            <input type="checkbox" [checked]="isAllSelected" (change)="toggleSelectAll()" />
          </th>
          <th>åˆ†é¡</th>
          <th>é …ç›®</th>
          <th>å¸³æ¬¾æè¿°</th>
          <th>é‡‘é¡</th>
          <th>ç´€éŒ„æ—¥æœŸ</th>
          <th>åˆªé™¤å€’æ•¸</th>
        </tr>
      </thead>
      <tbody>
        @for(p of filteredPayments; track $index){
          <tr>
            <td>
              <input type="checkbox" [(ngModel)]="p.selected" (change)="updateSelectAllState()" />
            </td>
            <td>{{ p.type }}</td>
            <td>{{ p.item }}</td>
            <td>{{ p.description }}</td>
            <td>{{ p.amount }}</td>
            <td>{{ p.recordDate }}</td>
            <td>
              @if(p.lifeTime == 0){
                <span style="color: red;">â³å³å°‡åˆªé™¤</span>
              }
              @else{
               <span>{{ p.lifeTime }} å¤©å¾Œåˆªé™¤</span>
              }
            </td>
          </tr>
        }
      </tbody>
    </table>
    }
  </div>
</div>
