<h2 class="title">選擇帳戶轉移</h2>

@if(transferDisplayDate.length == 0) {
  <p class="no-data-message">目前無未確認額度轉移資料</p>
}
@else{
  <!-- 表格 -->
  <table class="transfer-table">
    <thead>
      <tr>
        <th>轉帳者</th>
        <th>額度</th>
        <th>描述</th>
        <th>轉移日期</th>
        <th>選擇帳戶</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      @for(item of transferDisplayDate; track $index) {
        <tr>
          <!-- 轉帳者：大頭貼與姓名 -->
          <td class="sender-info">
            <img [src]="item.fromAvatar" alt="avatar" class="avatar" />
            <span>{{ item.fromName }}</span>
          </td>

          <!-- 額度 -->
          <td class="amount">{{ item.transfer.amount }}</td>

          <!-- 描述：若為空顯示「無」 -->
          <td class="description">
            @if(item.transfer.description) {
              {{ item.transfer.description }}
            }
            @else {
              （無）
            }
          </td>

          <!-- 建立日期 -->
          <td class="date">{{ item.transfer.createDate }}</td>

          <!-- 帳戶下拉式選單 -->
          <td>
            <select [(ngModel)]="item.selectedBalanceId">
              @for(b of balanceList; track $index) {
                <option [value]="b.balanceId">
                  @if(b.name) {
                    {{ b.name }}
                  }
                  @else {
                    帳戶 ID：{{ b.balanceId }}
                  }
                </option>
              }
            </select>
          </td>

          <!-- 操作按鈕 -->
          <td class="actions">
            <button class="accept-btn" (click)="accept(item.transfer.transfersId, item.selectedBalanceId)">
              接受
            </button>
            <button class="reject-btn" (click)="reject(item.transfer.transfersId)">
              拒絕
            </button>
          </td>
        </tr>
      }
    </tbody>
  </table>
}
